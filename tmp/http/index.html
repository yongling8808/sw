<!DOCTYPE html>


<head>

<script>

function register() {

console.log('serviceworker install...');

  navigator.serviceWorker.register('serviceworker.js').then( function(serviceWorker) {

if(serviceWorker.installing) {
      console.log('Service worker installing');
    } else if(serviceWorker.waiting) {
      console.log('Service worker installed');
    } else if(serviceWorker.active) {
      console.log('Service worker active');
    }
    console.log(serviceWorker);

// To use the serviceWorker immediately,

// you might call window.location.reload()
 
});



window.AudioContext = window['AudioContext '] || window['webkitAudioContext'];
var context = new window.AudioContext();

var audioURl = 'http://sound.kagirl.net/sound/qq_1287804.mp3'; 
var request = new XMLHttpRequest();
request.open('GET', audioURl, true);
request.responseType = 'arraybuffer';
request.onload = function() {
   context.decodeAudioData(request.response, function (buffer) {
       source = context.createBufferSource();
       source.buffer = buffer;
       source.connect(context.destination);
       source.start(0,0,60);
 });
};
request.send();

}

window.addEventListener('message', function(event) {
	if(event.data == "serviceworker-update")
	{
		alert("page have updated!");
		return;
	}
});

</script>
<script src="app.js" type="text/javascript"></script>
</head>

<body onload="register()">
<h1>ServiceWork HTTP Resource Test!</h1>

<audio src="http://sound.kagirl.net/sound/qq_1287804.mp3" controls="controls"></audio>

</br>
</br>
</br>
<image src='http://res.imtt.qq.com/homepage/real/206ba52e029d4848a5d292bdeaf7bd05.png'></image>
</br>
</br>
</br>
<button onclick="test()">Out Js Test!</button>
</br>
</br>
<h3>timestamp:20160419144300</h3>

</body>

</html>